(function(e){function t(t){for(var s,n,i=t[0],_=t[1],l=t[2],u=0,d=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(s in _)Object.prototype.hasOwnProperty.call(_,s)&&(e[s]=_[s]);c&&c(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],s=!0,i=1;i<r.length;i++){var _=r[i];0!==a[_]&&(s=!1)}s&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},a={app:0},o=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],_=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=_;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},1933:function(e,t,r){},"29d3":function(e,t,r){},3276:function(e,t,r){},"4e13":function(e,t,r){"use strict";r("3276")},5006:function(e,t,r){"use strict";r("7596")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("b0c0"),r("99af");var s=r("2b0e"),a=r("8c4f"),o=function(){var e=this,t=this,r=t.$createElement,s=t._self._c||r;return s("div",{staticClass:"layout"},[s("Layout",{staticStyle:{background:"#F1F1F1"}},[s("Header",{staticStyle:{background:"#333333"}},[s("Menu",{staticStyle:{background:"#333333",height:"64px"},attrs:{mode:"horizontal",theme:"dark","active-name":t.$route.name}},[t._l(t.routes,(function(e,r){return s("div",{key:r,attrs:{name:e.name,to:e.path}},[e.isTheme?s("MenuItem",{attrs:{name:e.name,to:e.path}},[s("h1",[t._v(t._s(e.title||e.name))])]):e.groups?s("Submenu",{attrs:{name:e.name,to:e.path}},[s("template",{slot:"title"},[s("h3",{staticStyle:{display:"initial"}},[t._v(t._s(e.title||e.name))])]),e.groups.group?s("MenuGroup",{attrs:{title:e.groups.group.title}},t._l(e.groups.group,(function(e,r){return s("MenuItem",{key:r,attrs:{name:e.name,to:e.path}},[s("h4",[t._v(t._s(e.title||e.name))])])})),1):t._l(e.groups,(function(e,r){return s("MenuItem",{key:r,attrs:{name:e.name,to:e.path}},[s("h4",[t._v(t._s(e.title||e.name))])])}))],2):s("MenuItem",{staticStyle:{height:"64px"},attrs:{name:e.name,to:e.path}},[s("h3",[t._v(t._s(e.title||e.name))])])],1)})),s("div",[s("a",{attrs:{href:"/api/logout"}},[s("MenuItem",{staticStyle:{float:"right"},attrs:{name:"logout"}},[s("h3",[t._v("退出")])])],1),s("MenuItem",{staticStyle:{float:"right","padding-right":"5px"},attrs:{name:"show-username"}},[t._v("admin ")])],1)],2)],1),s("Row",{staticStyle:{display:"block"}},[s("Affix",{staticStyle:{position:"fixed","z-index":"10"},attrs:{"offset-top":t.windowHeight}},[s("div",{staticStyle:{"text-align":"center"}},[s("Row",[s("Button",{staticStyle:{height:"auto",padding:"1px","border-radius":"0","background-color":"#547EFF"},attrs:{type:"primary",size:"small"},nativeOn:{mouseenter:function(e){t.showDrawer=!0}}},[s("span",{staticStyle:{"writing-mode":"vertical-rl","margin-top":"3px"}},[t._v("准入代理")])])],1)],1)]),s("Content",{style:{padding:"10px"}},[s("router-view")],1)],1),s("MainConnList",{attrs:{show:t.showDrawer},on:{setDrawerStatus:function(t){e.showDrawer=t}}})],1)],1)},n=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("Row",{staticStyle:{margin:"10px"}},[r("Input",{style:{margin:"0 10px ",width:"160px"},attrs:{placeholder:"IP"},model:{value:e.query.client_ip,callback:function(t){e.$set(e.query,"client_ip",t)},expression:"query.client_ip"}}),"off"===e.query.status?r("Button",{staticClass:"search-btn",attrs:{type:"error",disabled:e.query.lock},on:{click:function(t){return e.search()}}},[r("Icon",{attrs:{type:"search"}}),e._v("  拦截已关闭 ")],1):r("Button",{staticClass:"search-btn",style:{margin:"0 10px "},attrs:{type:"success",disabled:e.query.lock},on:{click:function(t){return e.search()}}},[r("Icon",{attrs:{type:"search"}}),e._v("  拦截已开启 ")],1),r("Button",{staticClass:"search-btn",style:{margin:"0 10px"},attrs:{type:"primary",disabled:e.optQuery.lock},on:{click:function(t){return e.updateData("forward")}}},[r("Icon",{attrs:{type:"search"}}),e._v(" 放过 ")],1),r("Button",{staticClass:"search-btn",style:{margin:"0 10px 0  0"},attrs:{type:"primary",disabled:e.optQuery.lock},on:{click:function(t){return e.updateData("drop")}}},[r("Icon",{attrs:{type:"search"}}),e._v(" 丢弃 ")],1),r("Button",{staticClass:"search-btn",style:{margin:"0 10px 0 0"},attrs:{type:"primary",disabled:e.optQuery.lock},on:{click:e.optAtom}},[r("Icon",{attrs:{type:"search"}}),e._v(" 重放 ")],1),r("Checkbox",{style:{margin:"7px 20px","font-size":"14px"},attrs:{size:"large"},model:{value:e.optQuery.wait_response,callback:function(t){e.$set(e.optQuery,"wait_response",t)},expression:"optQuery.wait_response"}},[r("span",[e._v("等待响应")])])],1),r("Row",{staticStyle:{margin:"20px"}},[r("iCol",{attrs:{span:"24"}},[r("Card",{attrs:{bordered:!0}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:15}},model:{value:e.showContent,callback:function(t){e.showContent=t},expression:"showContent"}})],1)],1)],1)],1)},_=[],l=(r("d3b7"),r("7c15")),c=r("b893"),u={name:"intercept-index",data:function(){return{query:{status:"off",client_ip:"",type:"",lock:!1},optQuery:{id:"",forward:!1,drop:!1,wait_response:!1,type:"",flow_content:"",edited:!1,lock:!0},showContent:"",showRawContent:""}},methods:{updateData:function(e){var t=this;t.optQuery.lock?t.$Notice.warning({title:"等待数据返回,请等待"}):(t.optQuery.lock=!0,t.optQuery.forward="forward"===e,t.optQuery.drop=!t.optQuery.forward,t.optQuery.edited=t.showContent!==t.showRawContent,t.optQuery.flow_content=btoa(encodeURI(t.showContent)),t.showContent="",Object(l["c"])(t.optQuery).then((function(e){t.setPageData(e.data.data),t.optQuery.lock=!1})).catch((function(e){t.optQuery.lock=!1,e.response?e.response.status<500?t.$Notice.error({title:"请求错误，注意检查请求参数"}):t.$Notice.error({title:"服务端发生未知错误,状态码: "+e.response.status}):t.$Message.error(e)})))},search:function(){var e=this;e.query.lock?e.$Notice.warning({title:"等待数据返回,请等待"}):e.query.client_ip?(e.query.status="on"===e.query.status?"off":"on",e.optQuery.lock=!0,e.showContent="",Object(l["b"])(e.query,"post").then((function(t){e.setPageData(t.data.data)})).catch((function(t){t.response?t.response.status<500?e.$Notice.error({title:"请求错误，注意检查请求参数"}):e.$Notice.error({title:"服务端发生未知错误,状态码: "+t.response.status}):e.$Message.error(t)}))):e.$Notice.warning({title:"client ip不能为空"})},optAtom:function(){var e=this.optQuery.id;if(!e)return"";window.open("/#/repeater?id="+e)},setPageData:function(e){var t=this;"req"===e.type?t.showContent=Object(c["e"])(e.data):"res"===e.type?t.showContent=Object(c["f"])(e.data):t.showContent="",t.showRawContent=t.showContent,t.query.client_ip=e.client_ip||t.query.client_ip,t.query.momoid=e.momoid||t.query.momoid,t.query.type=e.type||"",t.query.status=e.status||t.query.status,t.optQuery.id=e.data._id||"",t.optQuery.type=e.type||"",t.optQuery.lock=!t.optQuery.id}},mounted:function(){var e=this;this.$route.query.ip?this.query.client_ip=this.$route.query.ip:Object(l["b"])().then((function(t){e.setPageData(t.data.data),"on"===e.query.status&&Object(l["b"])(e.query,"post").then((function(t){e.setPageData(t.data.data)})).catch((function(e){e.response?e.response.status<500?this.$Notice.error({title:"请求错误，注意检查请求参数"}):this.$Notice.error({title:"服务端发生未知错误,状态码: "+e.response.status}):this.$Message.error(e)}))})).catch((function(e){e.response?e.response.status<500?this.$Notice.error({title:"请求错误，注意检查请求参数"}):this.$Notice.error({title:"服务端发生未知错误,状态码: "+e.response.status}):this.$Message.error(e)}))}},d=u,p=r("2877"),h=Object(p["a"])(d,i,_,!1,null,"1f4fa74f",null),f=h.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("Row",{staticStyle:{margin:"10px","padding-left":"13px"}},[r("Input",{staticStyle:{"max-width":"15%"},attrs:{placeholder:"ip"},on:{"on-change":e.setLoggerStorage,"on-blur":e.search},model:{value:e.query.ip,callback:function(t){e.$set(e.query,"ip",t)},expression:"query.ip"}}),r("Input",{staticStyle:{"max-width":"15%","margin-left":"10px"},attrs:{placeholder:"filter"},on:{"on-blur":e.tableFilterEvent},model:{value:e.query.filter,callback:function(t){e.$set(e.query,"filter",t)},expression:"query.filter"}}),e.connectStatus?r("Button",{staticStyle:{background:"#19be6b","margin-left":"10px",height:"32px",width:"70px",color:"#FFFFFF"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.connectWebSocket("disconnect")}}},[e._v("已连接 ")]):r("Button",{staticStyle:{background:"#ed4014","margin-left":"10px",height:"32px",width:"70px",color:"#FFFFFF"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.connectWebSocket("connect")}}},[e._v("未连接 ")]),r("Button",{staticClass:"search-btn",style:{margin:"0 10px ","background-color":"#547EFF",height:"32px",width:"60px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.clearScreen()}}},[r("Icon",{attrs:{type:"search"}}),e._v(" 清屏 ")],1)],1),r("Row",{staticStyle:{margin:"10px","padding-left":"13px"}},[r("Table",{attrs:{"highlight-row":"",columns:e.tableHeaders,data:e.tableBody,"row-class-name":e.rowClassName,height:"400",border:""},on:{"on-row-click":e.showDetailData,"on-column-width-resize":e.resizeTableColumn},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.row,a=t.index;return[r("a",{staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.optAtom(s,a)}}},[r("strong",[e._v("重放")])]),r("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.getShareUrl(s,a),expression:"getShareUrl(row, index)",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.shareUrl,expression:"shareUrl",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.shareUrlError,expression:"shareUrlError",arg:"error"}]},[r("strong",[e._v("分享")])])]}},{key:"desc",fn:function(t){var s=t.row;return[r("Input",{attrs:{readonly:"",icon:"ios-create-outline"},on:{"on-click":function(t){return e.editorNotes(t,s)},"on-blur":function(t){return e.changeNotes(t,s)},"on-enter":function(t){return e.changeNotes(t,s)}},model:{value:s.desc,callback:function(t){e.$set(s,"desc",t)},expression:"row.desc"}})]}}])})],1),r("Row",{staticStyle:{margin:"10px","padding-left":"13px"}},[r("iCol",{attrs:{span:"12"}},[r("Card",{attrs:{bordered:!0}},[r("div",{style:{height:"10px"},attrs:{slot:"title"},slot:"title"},[r("span",{staticStyle:{float:"left"}},[e._v("Request")]),r("Row",{staticStyle:{float:"left","margin-left":"20px"}},[e.request_show_flag?r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none","background-color":"#547EFF"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.request_show_flag=!0}}},[e._v("优化 ")]):r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none"},attrs:{size:"small"},on:{click:function(t){e.request_show_flag=!0}}},[e._v(" 优化 ")]),e.request_show_flag?r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none"},attrs:{size:"small"},on:{click:function(t){e.request_show_flag=!1}}},[e._v("原始 ")]):r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none","background-color":"#547EFF"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.request_show_flag=!1}}},[e._v("原始 ")])],1),r("div",{staticStyle:{float:"right"}},[r("a",{attrs:{type:"primary"},on:{click:e.toRepeater}},[e._v("重放")])])],1),r("div",[e.request_show_flag?r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:6}},model:{value:e.request,callback:function(t){e.request=t},expression:"request"}}):r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:6}},model:{value:e.request_raw,callback:function(t){e.request_raw=t},expression:"request_raw"}})],1)])],1),r("iCol",{attrs:{span:"12"}},[r("Card",{attrs:{bordered:!0}},[r("div",{style:{height:"10px"},attrs:{slot:"title"},slot:"title"},[r("span",{staticStyle:{float:"left"}},[e._v("Response")]),r("Row",{staticStyle:{float:"left","margin-left":"20px"}},[e.response_show_flag?r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none","background-color":"#547EFF"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.response_show_flag=!0}}},[e._v("优化 ")]):r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none"},attrs:{size:"small"},on:{click:function(t){e.response_show_flag=!0}}},[e._v("优化 ")]),e.response_show_flag?r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none"},attrs:{size:"small"},on:{click:function(t){e.response_show_flag=!1}}},[e._v("原始 ")]):r("Button",{staticStyle:{"border-radius":"0","border-bottom":"none","background-color":"#547EFF"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.response_show_flag=!1}}},[e._v("原始 ")])],1)],1),r("div",[e.response_show_flag?r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:6}},model:{value:e.response,callback:function(t){e.response=t},expression:"response"}}):r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:6}},model:{value:e.response_raw,callback:function(t){e.response_raw=t},expression:"response_raw"}})],1)])],1)],1)],1)},m=[],w=r("b85c"),b=(r("2ca0"),r("e9c4"),r("b64b"),r("4de4"),r("caad"),r("2532"),r("d81d"),r("a15b"),r("498a"),r("25f0"),r("ac1f"),r("5319"),r("159b"),r("daa8")),y=r("4eb5"),v=r.n(y),D=(r("53ca"),r("fb6a"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"%Y-%m-%d %H:%M:%S";function r(e){return(""+e).length<2?"0"+e:e+""}for(var s=new Date(1e3*e),a={"%Y":r(s.getFullYear()),"%m":r(s.getMonth()+1),"%d":r(s.getDate()),"%H":r(s.getHours()),"%M":r(s.getMinutes()),"%S":r(s.getSeconds())},o="",n=0;n<t.length;n++){var i=t.slice(n,n+2);a[i]?(o+=a[i],n++):o+=t[n]}return o});s["default"].use(v.a);var E={name:"LoggerIndex",data:function(){return{tableHeaders:[{title:"Domain",key:"domain",width:"300",resizable:!0},{title:"Path",key:"path",width:"400",resizable:!0},{title:"Time",key:"time",width:"160",resizable:!0},{title:"Method",key:"method",width:"100",resizable:!0},{title:"status",key:"status",width:"100",resizable:!0,filters:[{label:"5XX",value:"5"},{label:"4XX",value:"4"},{label:"3XX",value:"3"},{label:"2XX",value:"2"},{label:"1XX",value:"1"}],filterMethod:function(e,t){return String(t.status).startsWith(e)}},{title:"length",key:"length",width:"80",resizable:!0},{title:"描述",slot:"desc",align:"center",width:"120",resizable:!0},{title:"操作",slot:"action",align:"center",width:"120",resizable:!0}],showTableReqIds:[],tableBody:[],wsFullRequest:[],wsFullMap:{},query:{ip:"",start_time:"",end_time:"",filter:""},select_idx:"",socket_handler:"",request:"",response:"",request_raw:"",response_raw:"",request_show_flag:!0,response_show_flag:!0,choicesRow:{},connectStatus:!1,shareIdAuthCodeDict:{},splitValue:.5}},methods:{setLoggerStorage:function(){localStorage.setItem("loggerPage",JSON.stringify(this.query))},rowClassName:function(){return"table-logger-ws-row"},showTable:function(e){if(!this.tableFilter(e)){var t=this.formatTableRow(e),r=this.showTableReqIds.indexOf(t.raw_idx);r>-1?this.tableBody[r]=t:(this.showTableReqIds.unshift(t.raw_idx),this.tableBody.unshift(t))}},connectWebSocket:function(e){var t=this;if("disconnect"===e)return t.socket_handler.connected&&(t.$Notice.info({title:"断开连接"}),t.socket_handler.close()),t.connectStatus=!1,void(t.socket_handler="");if(!t.socket_handler||!t.socket_handler.connected){var r=Object(b["a"])("/api/logerws",{enablesXDR:!0,path:"/api/logerws",transports:["websocket"],enabledTransports:["ws","wss"]});return r.on("connect",(function(){t.socket_handler=r,t.socket_handler.emit("set_filter",t.getQuery()),t.socket_handler.emit("get"),r.on("get",(function(e){if("closed"!==e.status){try{if(e.request&&(Object.prototype.hasOwnProperty.call(t.wsFullMap,e.request._id)?(e.response=t.wsFullMap[e.request._id]["response"],t.wsFullMap[e.request._id]=e):(t.wsFullRequest.unshift(e.request._id),t.wsFullMap[e.request._id]=e)),e.response&&Object.keys(e.response).length){if(t.wsFullMap[e.response.req_id]["response"]=e.response,!e.request)for(var r=0;r<t.wsFullRequest.length;r++)t.wsFullRequest[r]===e.response.req_id&&(t.tableBody[r]=t.wsFullMap[e.response.req_id],t.tableBody[r]["raw_idx"]=r,t.tableBody[r]["status"]=e.response.status_code,t.tableBody[r]["length"]=e.response.content.length);e.request=t.wsFullMap[e.response.req_id].request}t.showTable(e)}catch(s){t.$Message.error(s)}t.wsFullRequest.length>=500&&t.wsFullRequest.length%100===0&&t.$Message.warning("浏览器缓存数据已经达到".concat(t.wsFullRequest.length,", 建议清屏!!!"))}else t.connectWebSocket("disconnect")})),t.$Notice.info({title:"连接成功"}),t.connectStatus=!0})),r.on("error",(function(){t.connectWebSocket("disconnect")})),r.on("disconnect",(function(){t.connectWebSocket("disconnect")})),(t.socket_handler&&t.socket_handler.disconnected||t.socket_handler)&&t.connectWebSocket("disconnect"),r}},tableFilter:function(e){var t=this.query.filter+"";return!!t&&!JSON.stringify(e).includes(t)},formatTableRow:function(e){var t={domain:e.request.host,path:e.request.path,time:D(e.request.timestamp_start),method:e.request.method,status:"",length:-1,desc:e.request.describe||"",raw_idx:e.request._id,_highlight:this.select_idx===e.raw_idx};return e.response&&Object.keys(e.response).length&&(t.status=e.response.status_code,t.length=e.response.content.length),t},resizeTableColumn:function(e,t,r){this.setLoggerTableConfig(r.title,parseInt(e))},setLoggerTableConfig:function(e,t){var r={},s=localStorage.getItem("LoggerTableConfig");null!=s&&(r=JSON.parse(s)),r[e]=t,localStorage.setItem("LoggerTableConfig",JSON.stringify(r))},tableFilterEvent:function(){var e,t=[],r=[],s=Object(w["a"])(this.wsFullRequest);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(!this.tableFilter(this.wsFullMap[a])){var o=this.formatTableRow(this.wsFullMap[a]);r.push(o.raw_idx),t.push(o)}}}catch(n){s.e(n)}finally{s.f()}this.showTableReqIds=r,this.tableBody=t},clearScreen:function(){this.tableBody=[],this.wsFullRequest=[],this.wsFullMap={}},getRawData:function(e){return this.wsFullMap[e]},showDetailData:function(e){this.select_idx=e.raw_idx,this.tableBody.map((function(t){t._highlight=e.raw_idx===t.raw_idx}));var t=this.getRawData(e.raw_idx);if(!t||!Object.keys(t).length)return console.error(t),void this.$Message.warning("数据有误,无法展示");this.choicesRow=t,this._showRequestData(t.request),this._showRequestRawData(t.request),this._showResponseData(t.response),this._showResponseRawData(t.response)},_showRequestData:function(e){var t=[e.method+" "+e.path+" "+e.http_version,"Host: "+e.host];for(var r in e.headers)"Host"!==r&&t.push(r+": "+e.headers[r]);t.push(""),t.push(e.pretty_text),this.request=t.join("\n")},_showRequestRawData:function(e){var t=[e.method+" "+e.path+" "+e.http_version,"Host: "+e.host];for(var r in e.headers)"Host"!==r&&t.push(r+": "+e.headers[r]);t.push(""),t.push(e.content),this.request_raw=t.join("\n")},_showResponseData:function(e){if(e){var t=[e.http_version+" "+e.status_code+" "+e.reason];for(var r in e.headers)t.push(r+" : "+e.headers[r]);t.push(""),t.push(e.pretty_text),this.response=t.join("\n"),this.response=this.response.trim()}else this.response=""},_showResponseRawData:function(e){if(e){var t=[e.http_version+" "+e.status_code+" "+e.reason];for(var r in e.headers)t.push(r+" : "+e.headers[r]);t.push(""),t.push(e.content),this.response_raw=t.join("\n"),this.response_raw=this.response_raw.trim()}else this.response_raw=""},optAtom:function(e){var t=this.getRawData(e.raw_idx);if(!t||!t.request||!Object.keys(t.request).length)return"";window.open("/#/repeater?id="+t.request._id)},editorNotes:function(e,t){var r=this.getRawData(t.raw_idx);if(!r||!r.request||!Object.keys(r.request).length||!r.request._id)return this.$Message.warning("本条数据有误，无法编辑"),"";e.target.parentNode.children[1].readOnly=!1,this.$Message.info("编辑:"+r.request.host)},changeNotes:function(e,t){var r=this;if(!e.target.parentNode.children[1].readOnly){e.target.parentNode.children[1].readOnly=!0;var s=this.getRawData(t.raw_idx);if(!s||!s.request||!Object.keys(s.request).length||!s.request._id)return this.$Message.warning("本条数据有误，无法编辑"),"";var a=this;try{Object(l["k"])({id:s.request._id,describe:t.desc}).then((function(){r.$Notice.info({title:"保存成功"}),a.wsFullMap[t.raw_idx].request.describe=t.desc})).catch((function(e){r.$Notice.error({title:"保存失败,服务异常",desc:e})}))}catch(e){this.$Message.warning(e)}}},getShareUrl:function(e){var t=this.getRawData(e.raw_idx);if(!t||!t.request||!Object.keys(t.request).length)return"";var r=Object(c["d"])(24),s=t.request._id,a="".concat(window.location.origin.toString(),"/#/repeater?id=").concat(s,"&auth_code=").concat(r);return this.shareIdAuthCodeDict[a]={authId:r,requestId:s},a},shareUrl:function(e){var t=this,r=this.shareIdAuthCodeDict[e.text];r&&Object(l["l"])(r["requestId"],r["authId"]).then((function(){})).catch((function(){t.$Message.warning("ShareAuthCode上传失败")})),this.$Notice.open({title:"分享链接",desc:e.text.replace("&auth_code","&auth_code\n")})},shareUrlError:function(){this.$Notice.error({title:"分享链接失败"})},toRepeater:function(){this.choicesRow.request&&this.choicesRow.request._id&&window.open("/#/repeater?id=".concat(this.choicesRow.request._id))},getLoggerTableConfig:function(){var e=localStorage.getItem("LoggerTableConfig"),t=JSON.parse(e);null!==t&&this.tableHeaders.forEach((function(e){e.title in t&&(e.width=t[e.title])}))},getQuery:function(){for(var e=["start_time","end_time"],t=JSON.parse(JSON.stringify(this.query)),r=0,s=e;r<s.length;r++){var a=s[r],o=t[a];o&&(o=new Date(o),t[a]=parseInt(o.getTime()/1e3))}return t},search:function(){this.socket_handler&&this.socket_handler.connected?(this.socket_handler.emit("set_filter",this.getQuery()),this.socket_handler.emit("get")):this.socket_handler=this.connectWebSocket()}},mounted:function(){this.setLoggerStorage(),this.getLoggerTableConfig()},beforeDestroy:function(){this.socket_handler&&this.socket_handler.close()}},M=E,x=(r("4e13"),r("5006"),Object(p["a"])(M,g,m,!1,null,"de0b24ca",null)),k=x.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("Row",{staticStyle:{padding:"0 5px"}},[r("iCol",{attrs:{span:"12"}},[r("Row",{staticStyle:{margin:"0 5px"}},[r("Button",{staticClass:"search-btn",staticStyle:{width:"65px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchGo()}}},[e._v("GO ")]),r("Button",{staticClass:"search-btn",staticStyle:{width:"65px","margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.requestContentFormat("json")}}},[e._v("ToJson ")]),r("Button",{staticClass:"search-btn",staticStyle:{width:"65px","margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.requestContentFormat("raw")}}},[e._v("ToRaw ")]),r("Button",{staticClass:"search-btn",staticStyle:{width:"65px","margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.addFlag}},[e._v("  add § ")]),r("Button",{staticClass:"search-btn",staticStyle:{width:"65px","margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.clearFlag}},[e._v("  clear § ")])],1),r("Row",{staticStyle:{margin:"5px 5px"}},[r("div",{staticStyle:{padding:"2px"}},[e._v(" 并发数: ")]),r("Input",{style:{width:"60px"},attrs:{placeholder:"并发数",type:"number",size:"small"},model:{value:e.query.concurrent_num,callback:function(t){e.$set(e.query,"concurrent_num",t)},expression:"query.concurrent_num"}}),r("Select",{style:{width:"120px","margin-left":"10px"},attrs:{size:"small"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.encodeTypeList,(function(t){return r("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1),r("Button",{style:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.showPayload}},[e._v("payload设置 ")])],1),r("Row",[r("Card",{staticStyle:{width:"100%"},attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("Request")]),r("Input",{ref:"requestEl",attrs:{type:"textarea",autosize:{minRows:21,maxRows:21}},nativeOn:{select:function(t){return e.bodyRequestSelectEvent.apply(null,arguments)}},model:{value:e.request,callback:function(t){e.request=t},expression:"request"}})],1)],1)],1),r("iCol",{attrs:{span:"12"}},[r("Row",{staticStyle:{margin:"0 5px"}},[r("Button",{staticStyle:{width:"80px",background:"#FF8F0B",color:"#FFFFFF"},attrs:{size:"small"},nativeOn:{mouseenter:function(t){e.modalHistory=!0}}},[e._v("历史记录 ")])],1),r("Row",{staticStyle:{margin:"5px 5px"}},[r("Checkbox",{style:{"border-color":"rgba(243, 246, 249, 0.2)"},attrs:{size:"small",border:""},model:{value:e.query.keepua,callback:function(t){e.$set(e.query,"keepua",t)},expression:"query.keepua"}},[e._v("保留ua ")]),r("Checkbox",{style:{"border-color":"rgba(243, 246, 249, 0.2)"},attrs:{size:"small",border:""},model:{value:e.query.ishttps,callback:function(t){e.$set(e.query,"ishttps",t)},expression:"query.ishttps"}},[e._v("HTTPS ")])],1),r("Row",[r("Card",{staticStyle:{width:"100%"},attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("Response")]),r("Input",{ref:"responseEl",attrs:{type:"textarea",readonly:"",autosize:{minRows:21,maxRows:21}},nativeOn:{select:function(t){return e.bodyResponseSelectEvent.apply(null,arguments)}},model:{value:e.response,callback:function(t){e.response=t},expression:"response"}})],1)],1)],1)],1),e.selectDataList.length>0?r("Row",{staticStyle:{padding:"10px 10px",width:"100%"}},[r("Collapse",{staticStyle:{width:"100%"},model:{value:e.resultCollapse,callback:function(t){e.resultCollapse=t},expression:"resultCollapse"}},e._l(e.selectDataList,(function(t){return r("Panel",{key:t},[r("span",[e._v(" "+e._s(t.title)+" "),r("Button",{staticStyle:{width:"60px","margin-right":"50px",float:"right","margin-top":"7px"},attrs:{size:"small",type:"primary"},on:{click:function(r){return e.openNewUrl(t.url)}}},[e._v("重放")])],1),r("div",{attrs:{slot:"content"},slot:"content"},[r("Row",[r("iCol",{style:{"padding-right":"20px"},attrs:{span:"12"}},[r("Card",{attrs:{bordered:!0}},[r("div",{attrs:{slot:"title"},slot:"title"},[e._v("Request")]),r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:21,maxRows:21}},model:{value:t.request,callback:function(r){e.$set(t,"request",r)},expression:"item.request"}})],1)],1),r("iCol",{attrs:{span:"12"}},[r("Card",{attrs:{bordered:!0}},[r("div",{attrs:{slot:"title"},slot:"title"},[e._v("Response")]),r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:21,maxRows:21}},model:{value:t.response,callback:function(r){e.$set(t,"response",r)},expression:"item.response"}})],1)],1)],1)],1)])})),1)],1):e._e(),r("div",{attrs:{id:"concurrent_num-id"}},[r("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,width:650},model:{value:e.concurrentModal.show,callback:function(t){e.$set(e.concurrentModal,"show",t)},expression:"concurrentModal.show"}},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("并发次数: "+e._s(e.query.concurrent_num))]),r("Row",{staticStyle:{display:"block"}},[r("Table",{attrs:{"highlight-row":"",columns:e.concurrentModal.table.headers,data:e.concurrentModal.table.body},scopedSlots:e._u([{key:"content",fn:function(t){var s=t.row,a=t.index;return[0===a?r("span",[e._v(e._s(s.content))]):r("div",{domProps:{innerHTML:e._s(e.getDifferHtml(e.concurrentModal.table.body[0].content,s.content))}})]}}])})],1)],1)],1),r("div",{attrs:{id:"repeater_test"}},[r("Modal",{attrs:{width:"1200px",title:e.repeaterTestModal.title},model:{value:e.repeaterTestModal.show,callback:function(t){e.$set(e.repeaterTestModal,"show",t)},expression:"repeaterTestModal.show"}},[r("Row",{attrs:{gutter:"2",type:"flex",justify:"center"}},[r("Col",{attrs:{span:"7"}},[r("Card",{attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("Request")]),r("div",{ref:"repeaterTestModal"},[r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:27,maxRows:27}},model:{value:e.request,callback:function(t){e.request=t},expression:"request"}})],1)])],1),e.repeaterTestModal.simpleModel?r("Row",[r("Col",{attrs:{span:"12"}},[r("Card",{staticStyle:{width:"400px"},attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("变量列表")]),r("Input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:27,maxRows:27}},model:{value:e.repeaterTestModal.vars,callback:function(t){e.$set(e.repeaterTestModal,"vars",t)},expression:"repeaterTestModal.vars"}})],1)],1),r("Col",{attrs:{span:"12"}},[r("Card",{staticStyle:{width:"400px"},attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Tooltip",{attrs:{"max-width":"200"}},[e._v(" 变量值列表 "),r("Icon",{attrs:{type:"ios-help",size:"20"}}),r("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 支持范围关键字(range:)枚举和简单js函数枚举 范围关键字range:startIndex,endIndex,step, 默认step为1, 例如: range:1,5 -> [1,2,3,4] ")])],1)],1),r("Input",{attrs:{type:"textarea",autosize:{minRows:27,maxRows:27},disabled:e.repeaterTestModal.preShow,readonly:e.repeaterTestModal.preShow},model:{value:e.repeaterTestModal.dest,callback:function(t){e.$set(e.repeaterTestModal,"dest",t)},expression:"repeaterTestModal.dest"}})],1)],1)],1):r("div",[r("Col",{attrs:{span:"14"}},[r("Card",{staticStyle:{width:"800px"},attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Tooltip",{attrs:{"max-width":"200"}},[e._v(" 变量列表 "),r("Icon",{attrs:{type:"ios-help",size:"20"}}),r("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 支持范围关键字(range:)枚举和简单js函数枚举 范围关键字range:startIndex,endIndex,step, 默认step为1, 例如: range:1,5 -> [1,2,3,4] ")])],1)],1),r("div",{style:{height:e.repeaterTestModal.rawDivHeight}},e._l(e.repeaterTestModal.rawVars,(function(t){return r("Row",{key:t,staticStyle:{"padding-top":"10px"},attrs:{gutter:10}},[r("iCol",{attrs:{span:"8"}},[r("Tag",{attrs:{size:"large"}},[e._v(e._s(t))])],1),r("iCol",{attrs:{span:"16"}},[r("Input",{attrs:{type:"textarea",placeholder:"参数"+t+"值内容",disabled:e.repeaterTestModal.preShow,readonly:e.repeaterTestModal.preShow},model:{value:e.repeaterTestModal.rawDest[t],callback:function(r){e.$set(e.repeaterTestModal.rawDest,t,r)},expression:"repeaterTestModal.rawDest[item]"}})],1)],1)})),1)])],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(){e.repeaterTestModal={show:!1,vars:"",dest:"",rawDest:{},rawVars:[],rawDivHeight:"100px",title:"Payload配置",preShow:!1,preRaw:""}}}},[e._v("取消 ")]),e.repeaterTestModal.preShow?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.preShowPlayload("cancel")}}},[e._v("取消预览")]):r("Button",{attrs:{type:"info"},on:{click:e.preShowPlayload}},[e._v("预览")]),r("Button",{attrs:{type:"primary"},on:{click:function(){e.setPlayload(),e.repeaterTestModal.show=!1;var t=[];if(t=e.repeaterTestModal.simpleModel?e.repeaterTestModal.vars.split("\n"):e.repeaterTestModal.rawVars,"sniper"===e.query.type&&(e.query.concurrent_num=e.query.payload[0].length*t.length),"battering ram"===e.query.type&&(e.query.concurrent_num=e.query.payload[0].length),"pitchfork"===e.query.type&&(e.query.concurrent_num=e.query.payload[0].length),"cluster bomb"===e.query.type){for(var r=1,s=0;s<e.query.payload.length;s++){var a=e.query.payload[s];r*=a.length}e.query.concurrent_num=r}}}},[e._v("确定 ")])],1)],1)],1),r("Modal",{attrs:{draggable:"",scrollable:"",mask:!1,title:"历史记录",width:"600","ok-text":"关闭","cancel-text":""},model:{value:e.modalHistory,callback:function(t){e.modalHistory=t},expression:"modalHistory"}},[r("div",[r("Row",[r("iCol",[r("Input",{attrs:{search:"",placeholder:"搜索"},on:{"on-change":e.searchHis},model:{value:e.tableHis.searchStr,callback:function(t){e.$set(e.tableHis,"searchStr",t)},expression:"tableHis.searchStr"}})],1)],1),r("Row",{staticStyle:{"margin-top":"5px",display:"block"}},[r("Table",{staticStyle:{margin:"5px"},attrs:{"highlight-row":"",columns:e.tableHis.headers,data:e.tableHis.body,"show-header":!1,"row-class-name":e.rowClassName,height:"500"},on:{"on-row-click":e.showData},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.row,a=t.index;return[r("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.getShareUrl(s,a),expression:"getShareUrl(row, index)",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.shareUrl,expression:"shareUrl",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.shareUrlError,expression:"shareUrlError",arg:"error"}]},[r("strong",{staticStyle:{"white-space":"nowrap"}},[e._v("分享")])])]}}])})],1)],1)])],1)},T=[],q=r("d0d5"),C=q["a"],j=(r("939d"),r("ff37"),Object(p["a"])(C,O,T,!1,null,"7d564bd3",null)),P=j.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("Row",{staticStyle:{padding:"5px","margin-bottom":"5px"},attrs:{gutter:10}},[r("iCol",{attrs:{span:"17"}},[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入客户端IP"},model:{value:e.query.client_ip,callback:function(t){e.$set(e.query,"client_ip",t)},expression:"query.client_ip"}}),r("Select",{staticStyle:{width:"120px","margin-left":"10px"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(Object.entries(e.typeMap),(function(t){var s=t[0],a=t[1];return r("Option",{key:s,attrs:{value:s}},[e._v(e._s(a))])})),1),r("Input",{staticStyle:{"max-width":"15%","margin-left":"10px"},attrs:{placeholder:"过滤字符串"},on:{"on-blur":e.tableFilterEvent},model:{value:e.query.filter,callback:function(t){e.$set(e.query,"filter",t)},expression:"query.filter"}}),r("Button",{staticClass:"search-btn",staticStyle:{"margin-left":"10px",background:"#ed4014",border:"none"},attrs:{type:"primary"},on:{click:e.search}},[this.wsHandler.status?r("div",[e._v(" 已连接 ")]):r("div",[e._v(" 未连接 ")])]),r("Button",{staticClass:"search-btn",style:{margin:"0 10px "},attrs:{type:"primary"},on:{click:e.clearScreen}},[e._v(" 清屏 ")])],1)],1),r("Row",{attrs:{gutter:10}},[r("iCol",{attrs:{span:"7"}},[r("LinkTable",{attrs:{linkData:e.linkData,ip:e.query.ip},on:{showConnDetail:e.showConnDetail}})],1),r("iCol",{attrs:{span:"10"}},[r("Card",{attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("消息列表")]),r("p",{attrs:{slot:"extra"},slot:"extra"},[r("span",[e._v("条数: "+e._s(e.table.body.length))])]),r("Table",{attrs:{"highlight-row":"",columns:e.table.headers,data:e.table.body,height:"590"},on:{"on-row-click":e.showDetail}})],1)],1),r("iCol",{attrs:{span:"7"}},[r("Card",{attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("span",{staticStyle:{"margin-right":"10px"}},[e._v("消息详情")]),r("Checkbox",{attrs:{size:"small"},model:{value:e.showMsgDetail.isShowHex,callback:function(t){e.$set(e.showMsgDetail,"isShowHex",t)},expression:"showMsgDetail.isShowHex"}},[e._v("HEX")])],1),r("p",{attrs:{slot:"extra"},slot:"extra"},[r("span",[e._v("Direction: "+e._s(e.showMsgDetail.type))])]),r("Input",{attrs:{type:"textarea",autosize:{minRows:14,maxRows:14}},on:{"on-change":e.updateHexText},model:{value:e.showMsgDetail.text,callback:function(t){e.$set(e.showMsgDetail,"text",t)},expression:"showMsgDetail.text"}})],1),r("Row",{staticStyle:{"margin-top":"5px","margin-bottom":"5px"},attrs:{type:"flex",justify:"end"}},[r("div",{staticStyle:{display:"inline-flex","margin-right":"10px"}},[r("span",{staticStyle:{width:"60px","margin-top":"7px"}},[e._v("并发数:")]),r("Input",{staticStyle:{width:"40px"},attrs:{placeholder:"并发数"},model:{value:e.process_cnt,callback:function(t){e.process_cnt=t},expression:"process_cnt"}})],1),r("Button",{staticClass:"search-btn action-btn",style:{"margin-right":"10px",color:"#547EFF","border-color":"#547EFF"},attrs:{disabled:e.msgDetail.actionStatus,loading:e.msgDetail.actionStatus},on:{click:function(t){return e.repeaterGo("send")}}},[r("Icon",{attrs:{type:"search"}}),e._v(" 发送 ")],1),r("Button",{staticClass:"search-btn action-btn",style:{"margin-right":"10px",background:"#547EFF",color:"#FFFFFF"},attrs:{disabled:e.msgDetail.actionStatus,loading:e.msgDetail.actionStatus},on:{click:function(t){return e.repeaterGo("receive")}}},[r("Icon",{attrs:{type:"search"}}),e._v(" 接收 ")],1)],1),e.showMsgDetail.isShowHex?r("Card",{attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("HEX")]),r("Input",{attrs:{type:"textarea",autosize:{minRows:14,maxRows:14}},on:{"on-change":e.updateText},model:{value:e.showMsgDetail.hex_text,callback:function(t){e.$set(e.showMsgDetail,"hex_text",t)},expression:"showMsgDetail.hex_text"}})],1):e._e()],1)],1)],1)},S=[],I=r("5530"),L=(r("a630"),r("3ca3"),r("4d90"),r("1276"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",{attrs:{bordered:!0}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("连接列表")]),r("p",{attrs:{slot:"extra"},slot:"extra"},[r("span",[e._v("存活: "+e._s(e.liveCnt))]),r("span",{staticStyle:{"padding-left":"10px"}},[e._v("断开: "+e._s(e.dieCnt))])]),r("Table",{attrs:{"highlight-row":"",columns:e.table.headers,data:e.table.body,height:"590"},on:{"on-row-click":e.showConn}})],1)],1)}),B=[],A=r("3835"),U=(r("4fad"),{name:"LinkTable",props:["linkData","ip"],data:function(){return{table:{headers:[{title:"存活",key:"live",align:"center",render:function(e,t){return e("Tag",{props:{color:t.row.live?"success":"error"},style:{border:"none !important",width:"16px",height:"16px","-moz-border-radius":"8px","-webkit-border-radius":"8px","border-radius":"8px"}},"")}},{title:"连接",key:"link",align:"center",width:"200"},{title:"类型",key:"type",align:"center",width:"105"}],body:[]},total_conn_data:{body:[],sort_list:[]},liveCnt:0,dieCnt:0,select_pk:""}},methods:{refreshTable:function(){if(!Object.keys(this.linkData).length)return this.dieCnt=this.liveCnt=0,this.total_conn_data.body=[],void(this.total_conn_data.sort_list=[]);this.dieCnt=this.liveCnt=0;for(var e=0,t=Object.entries(this.linkData);e<t.length;e++){var r=Object(A["a"])(t[e],2),s=r[0],a=r[1],o=this.total_conn_data.sort_list.indexOf(s),n={live:a.live||!1,link:"".concat(a.server_host,":").concat(a.server_port)||"-",type:a.type||"-",pk:a._id,raw_data:a};o<0?(this.total_conn_data.sort_list.unshift(s),this.total_conn_data.body.unshift(n)):this.total_conn_data.body[o]=n}var i,_=[],l=Object(w["a"])(this.total_conn_data.body);try{for(l.s();!(i=l.n()).done;){var c=i.value;c.raw_data.client_host&&!c.raw_data.client_host.includes(this.ip)||(c.live?this.liveCnt++:this.dieCnt++,c._highlight=c.pk===this.select_pk,_.push(c))}}catch(u){l.e(u)}finally{l.f()}this.table.body=_},showConn:function(e){this.select_pk=e.pk,this.$emit("showConnDetail",e.pk)}},mounted:function(){this._linkTable=setInterval(this.refreshTable,1e3)}}),F=U,H=Object(p["a"])(F,L,B,!1,null,null,null),$=H.exports,W=["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F"],K={name:"imws-index",components:{LinkTable:$},data:function(){return{wsHandler:{status:!1,sock:""},typeMap:{all:"全部",tcp:"tcp",websocket:"websocket"},query:{filter:"",type:"all",ip:"",showConnPk:""},process_cnt:0,linkData:{},table:{headers:[{title:"Message",key:"content",align:"center",render:function(e,t){return e("span",t.row.content.slice(0,150))}},{title:"Direction",key:"direction",align:"center",width:"110"},{title:"length",key:"length",align:"center",width:"80"}],body:[],filter:"",select_idx:""},msgData:{},msgDataIdx:{},showMsgDetail:{pk:"",text:"",hex_text:"",isShowHex:!1,type:"",conn_id:""},msgDetail:{pk:"",text:"",show:!0,filterStatus:!1,actionStatus:!1}}},methods:{getQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"filter";return"sock"===e?{ip:this.query.ip,type:this.query.type}:{}},tableFilterEvent:function(){this.table.filter=this.query.filter,this.showConnDetail(this.query.showConnPk)},isTableFilter:function(e){var t=e.content||"";return t.includes(this.table.filter)},webSocket:function(e){var t=this;if("disconnect"===e)return""!==t.wsHandler.sock&&(t.wsHandler.sock.close(),t.wsHandler.status=t.wsHandler.sock.connected,t.wsHandler.sock=""),void this.$Notice.info({title:"断开连接"});if(!t.wsHandler.sock||!t.wsHandler.sock.connected){var r=Object(b["a"])("/api/imws",{enablesXDR:!0,path:"/api/logerws",transports:["websocket"],enabledTransports:["ws","wss"]});r.on("connect",(function(){t.wsHandler.sock=r,r.emit("set_filter",t.getQuery("sock")),r.emit("get"),r.on("get_conn",(function(e){t.linkData[e._id]=Object(I["a"])({from_dt:(new Date).getTime()},e)})),r.emit("get_mes"),r.on("get_mes",(function(e){if(e.length=(e.content||"").length,e.conn_id in t.msgData){var r=t.msgDataIdx[e.conn_id].indexOf(e._id);r<0?(t.msgData[e.conn_id].push(e),t.msgDataIdx[e.conn_id].push(e._id)):t.msgData[e.conn_id][r]=e}else t.msgData[e.conn_id]=[e],t.msgDataIdx[e.conn_id]=[e._id];t.refreshConnDetail(e)})),r.connected?(t.wsHandler.status=r.connected,t.$Notice.info({title:"连接成功"})):t.$Notice.error({title:"连接异常"})})),r.on("reconnect",(function(){""!==t.wsHandler.sock&&t.wsHandler.sock.close(),t.wsHandler.status=!1,t.wsHandler.sock="",t.webSocket()})),r.on("error",(function(){t.webSocket("disconnect")})),(t.wsHandler.sock&&t.wsHandler.sock.disconnected||t.sock)&&t.webSocket("disconnect")}},showConnDetail:function(e){var t=this;if(t.query.showConnPk=e,t.showMsgDetail.conn_id=t.query.showConnPk,t.msgData[e]){var r=[];t.msgData[e].map((function(e){t.table.select_idx&&t.table.select_idx===e._id?e._highlight=!0:e._highlight=!1,t.isTableFilter(e)&&r.unshift(e)})),this.table.body=r}else this.table.body=[]},refreshConnDetail:function(){var e=this;e.showConnDetail(e.query.showConnPk)},search:function(){var e=event.currentTarget;if(this.wsHandler.status)return this.wsHandler.status&&this.webSocket("disconnect"),void e.style.setProperty("background","#ed4014");e.style.setProperty("background","#19be6b"),this.webSocket()},clearScreen:function(){this.linkData={},this.msgData={},this.query.showConnPk="",this.showMsgDetail={pk:"",text:"",type:"",conn_id:""},this.table.body=[]},showConn:function(e){this.select_pk=e.pk,this.$emit("showConnDetail",e.pk)},utf8ToHex:function(e){var t=[];return Array.from(e).map((function(e){t.push(e.charCodeAt(0)<128?e.charCodeAt(0).toString(16).padStart(2,"0").toUpperCase():encodeURIComponent(e).split("%").join(" ").trim(""))})),t.join(" ")},updateHexText:function(){try{this.showMsgDetail.hex_text=this.utf8ToHex(this.showMsgDetail.text)}catch(e){console.error("无法进行编码, 错误: ".concat(e)),this.$Message.error("无法进行编码, 错误: ".concat(e))}},hexToArray:function(e){var t,r=[],s=Object(w["a"])(e);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(" "!==a){var o=r.length>0?r[r.length-1]:"";if(!W.includes(a.toUpperCase()))return this.$Message.error("消息详情16进制编码有错误字符: ".concat(a)),[];a=a.toUpperCase(),1===o.length?r[r.length-1]="".concat(o).concat(a):r.push(a)}}}catch(n){s.e(n)}finally{s.f()}return r},updateText:function(){var e=this.hexToArray(this.showMsgDetail.hex_text);if(e.length){this.showMsgDetail.hex_text=e.join(" ");try{this.showMsgDetail.text=decodeURIComponent("%".concat(e.join("%")))}catch(t){console.error("无法解码,错误: ".concat(t))}}},doAction:function(e){var t=this,r="";t.msgDetail.actionStatus=!0;try{"filter"===e?(r=Object(l["i"])(t.showMsgDetail.conn_id,t.msgDetail.filterStatus?"off":"on"),t.msgDetail.filterStatus=!t.msgDetail.filterStatus):r=Object(l["j"])(t.showMsgDetail.pk,t.showMsgDetail.conn_id,e,t.showMsgDetail.text),r.then((function(r){t.msgDetail.actionStatus=!1,("filter"!==e||t.msgDetail.filterStatus)&&(t.$Message.info("".concat(t.showMsgDetail.type,"请求成功")),t.showMsgDetail.pk=r.data.data.data._id,t.showMsgDetail.text=r.data.data.data.content,t.showMsgDetail.type=r.data.data.data.direction)})).catch((function(r){t.$Message.error("".concat(t.showMsgDetail.type,"请求失败")),console.error(r),"filter"===e&&(t.msgDetail.filterStatus=!t.msgDetail.filterStatus),t.msgDetail.actionStatus=!1}))}catch(s){t.$Message.error("".concat(s)),t.msgDetail.actionStatus=!1}},repeaterGo:function(e){var t=this;t.msgDetail.actionStatus=!0;try{Object(l["h"])(t.showMsgDetail.conn_id,t.showMsgDetail.text,t.showMsgDetail.hex_text.split(" ").join(""),e,t.process_cnt).then((function(){t.$Message.info("".concat(e,"请求成功")),t.msgDetail.actionStatus=!1})).catch((function(r){t.$Message.error("".concat(e,"请求失败")),console.error(r),t.msgDetail.actionStatus=!1}))}catch(r){t.$Message.error("".concat(r)),t.msgDetail.actionStatus=!1}},showDetail:function(e){this.table.select_idx=e._id,this.showMsgDetail={pk:e._id,text:e.content,hex_text:this.utf8ToHex(e.content),type:e.direction,isShowHex:this.showMsgDetail.isShowHex,conn_id:e.conn_id},this.table.body.map((function(t){t._highlight=!1,e._id===t._id&&(t._highlight=!0)}))}}},N=K,z=(r("eb2a"),Object(p["a"])(N,R,S,!1,null,"17aadc08",null)),Q=z.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("Row",{staticStyle:{padding:"10px 10px 10px 23px"}},[r("div",{staticClass:"search-con search-con-top"},[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"查询内容"},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),r("Button",{staticClass:"search-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[r("Icon",{attrs:{type:"search"}}),e._v(" 查询 ")],1)],1)]),r("Row",{staticStyle:{padding:"10px 10px 10px 23px"}},[r("iCol",{attrs:{span:"8"}},[r("Menu",{attrs:{mode:"horizontal","active-name":e.query.type}},[r("MenuItem",{attrs:{name:"all"},nativeOn:{click:function(t){return e.search("all")}}},[e._v("全部")]),r("MenuItem",{attrs:{name:"logger"},nativeOn:{click:function(t){return e.search("logger")}}},[e._v("logger")]),r("MenuItem",{attrs:{name:"repeater"},nativeOn:{click:function(t){return e.search("repeater")}}},[e._v("repeater")]),r("MenuItem",{attrs:{name:"apis"},nativeOn:{click:function(t){return e.search("apis")}}},[e._v("apis")])],1)],1)],1),r("Row",{staticStyle:{padding:"5px 25px","min-height":"400px",display:"block","background-color":"#FFFFFF",margin:"0 23px"}},[r("Table",{attrs:{"highlight-row":"",loading:e.table.loading,"show-header":!1,columns:e.table.headers,data:e.table.body},on:{"on-row-click":e.redirectRepeater}})],1),r("Row",{staticStyle:{padding:"5px 25px"}},[r("Layout",{staticStyle:{"background-color":"#F1F1F1"}},[r("Page",{attrs:{total:e.table.tableCount,"show-sizer":"","show-elevator":"",transfer:""},on:{"on-change":e.getPageNumber,"on-page-size-change":e.getPageSize}})],1)],1),r("Row",{staticStyle:{padding:"5px 25px"}},[r("iCol",{attrs:{span:"8"}},["all"===e.query.type?r("span",[e._v("总共查询结果为: "+e._s(e.table.tableCount)+"条, logger条数: "+e._s(e.table.loggerCount)+", repeater条数: "+e._s(e.table.repeaterCount)+", apis条数: "+e._s(e.table.apisCount))]):r("span",[e._v("总共查询结果为: "+e._s(e.table.tableCount)+"条")])])],1)],1)},J=[],X=(r("bf19"),{name:"history-index",data:function(){return{table:{headers:[{title:"结果",key:"data",render:function(e,t){var r=t.row.data.request,s=t.row.data.response,a=r.scheme+"://"+r.host+r.path,o=r.content||"",n=r.headers.cookie||r.headers.Cookie||"",i=s.content||"",_=s.timestamp_start||"",l=s.status_code||"";return _&&(_=new Date(1e3*_+288e5),_=_.toJSON(),_=_.replace("T"," "),_=_.replace("Z","")),e("div",{style:{padding:"10px"}},[e("p",{style:{"font-size":"10px"}},[e("span",t.row.data.type)]),e("p",{style:{padding:"10px"}},[e("div",[e("strong",a),e("div",{style:{float:"right"}},[e("strong",_),e("strong",{style:{"padding-left":"30px"}},l)])])]),e("p",{style:{padding:"10px"}},[e("span",n.slice(0,200))]),e("p",{style:{padding:"10px"}},[e("span",o.slice(0,200))]),e("p",{style:{padding:"10px"}},[e("span",i.slice(0,200))])])}}],body:[],tableCount:0,loggerCount:0,repeaterCount:0,apisCount:0,loading:!1},query:{keyword:"",type:"all",page:1,size:10}}},methods:{redirectRepeater:function(e){var t=window.location.origin.toString()+"/#/repeater?id="+e.data.request._id;window.open(t)},respToTableData:function(e){var t,r=Object(w["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;this.table.body.push({data:s})}}catch(a){r.e(a)}finally{r.f()}},setTableData:function(){var e=this;e.table.body=[],e.table.loading=!0,Object(l["g"])(this.query).then((function(t){var r=t.data.data.data;e.respToTableData(r.data),e.table.tableCount=r.count,e.table.loggerCount=r.logger_count,e.table.repeaterCount=r.repeater_count,e.table.apisCount=r.apis_count,e.table.loading=!1})).catch((function(t){e.table.loading=!1,e.$Notice.error({title:"查询异常",desc:t})}))},search:function(e){e&&(this.query.type=e),this.query.size=10,this.query.page=1,this.setTableData()},getPageNumber:function(e){this.query.page=e,this.setTableData()},getPageSize:function(e){this.query.size=e,this.setTableData()}},mounted:function(){}}),V=X,Y=(r("7ac0"),Object(p["a"])(V,G,J,!1,null,"c70a7df4",null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("div",{staticClass:"markdown-body",staticStyle:{padding:"15px"}},[r("markdown")],1)])},te=[],re=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},se=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("html",[r("head"),r("body",[r("h2",[e._v("准备工作")]),r("p",[e._v("如果你已经使用了"),r("code",{pre:!0},[e._v("just trust me")]),e._v("或通过其他方式解决了"),r("code",{pre:!0},[e._v("SSL Pinning")]),e._v("，可直接跳过此步骤。"),r("br"),e._v(" 否则请继续执行下列操作。")]),r("ol",[r("li",[e._v("将手机代理挂载到服务端开放的HTTP代理端口上")]),r("li",[e._v("使用手机浏览器访问"),r("code",{pre:!0},[e._v("mitm.it")]),e._v("，下载证书")]),r("li",[e._v("将证书插入系统证书库，并信任")]),r("li",[e._v("打开要抓包的应用")])]),r("h2",[e._v("Web功能")]),r("h3",[e._v("准入代理")]),r("p",[r("img",{attrs:{src:"screenshot/%E9%A6%96%E9%A1%B5.png",alt:"img.png"}})]),r("ul",[r("li",[e._v("入口：页面左侧悬浮窗是准入代理功能，鼠标悬浮于图标上可触发。准入代理是用于授权可以通过代理访问的客户端ip，用于对代理进行权限控制。")]),r("li",[e._v("授权与撤销：点击接入即可授权成功，再次点击撤销可撤回对该ip的授权。授权的客户端ip会在持续无流量三分钟后失效。")]),r("li",[e._v("拦截状态字段：拦截状态标识是指客户端ip是否在HTTP拦截中设置了拦截状态，若出现HTTP记录页仅展示请求无响应时，可通过观察该标识判断是否是因为开启了拦截导致。")])]),r("p",[r("img",{attrs:{src:"screenshot/%E5%87%86%E5%85%A5%E4%BB%A3%E7%90%86.png",alt:"img.png"}})]),r("h3",[e._v("HTTP拦截")]),r("ul",[r("li",[e._v("拦截：填入IP并点击拦截已关闭按钮将拦截该IP的所有HTTP请求，并将下一个拦截到的HTTP请求展示在当前页面。")]),r("li",[e._v("修改：展示在当前文本框中的请求可修改请求体部分，其他部分暂不支持修改。")]),r("li",[e._v("操作：修改过后点击放过、丢弃按钮可对当前修改过的请求进行操作，将修改过的请求替代原始请求发送至服务端。点击重放可将当前停留的请求发送至HTTP重放页面，进行更加自定义的重访操作。")]),r("li",[e._v("等待响应：勾选等待响应后，点击放过按钮，将会等待此次放过请求的响应，并将该响应展示到文本框中，响应也可以被执行修改、放过、丢弃等操作。")])]),r("p",[r("img",{attrs:{src:"screenshot/HTTP%E6%8B%A6%E6%88%AA.png",alt:"img.png"}})]),r("h3",[e._v("HTTP记录")]),r("ul",[r("li",[e._v("连接：输入IP字段以过滤指定客户端ip的流量，否则你将会看到所有的流量，然后点击未连接按钮，即可连上服务端并获取实时的流量数据。再次点击已连接可断开连接。")]),r("li",[e._v("过滤：filter输入框是用于前端过滤流量的，所以所有流量还是缓存在浏览器中的。")]),r("li",[e._v("清屏：会清除当前页面所有HTTP记录。")]),r("li",[e._v("描述：用于标记api的功能描述，后续相同接口的api将会带有描述展示。")]),r("li",[e._v("优化：优化展示json格式的请求体与响应体，可通过原始切换查看原始请求与响应。")]),r("li",[e._v("重放：点击重放即可跳转到该次请求详情的重放页面，进行下一步的测试。")]),r("li",[e._v("分享：点击分享可将流量详情的链接复制到剪切板上。")])]),r("p",[r("img",{attrs:{src:"screenshot/HTTP%E8%AE%B0%E5%BD%95.png",alt:"img.png"}})]),r("h3",[e._v("HTTP重放")]),r("ul",[r("li",[e._v("重放：点击GO即可重放当前Request输入框中的HTTP请求。其中保留ua、HTTPS为重放时的可选项。")]),r("li",[e._v("格式转换：Tojson、ToRaw按钮为转换请求体中的参数格式，Tojson可将普通格式转换成json格式参数，ToRaw可将json格式参数转换成普通格式。")]),r("li",[e._v("并发：通过add §、clear § 按钮为请求添加可变参数，在payload设置按钮填入自定义字典来替换可变参数以进行有规律的遍历请求。支持的并发类型有四种（与burpsuite的intruder同）。若不添加§符号并修改并发数，可直接并发重放原始数据包。")]),r("li",[e._v("并发详情：通过分享链接查看并发请求时，可在页面下方单独查看每个请求的详情。")]),r("li",[e._v("最近20条：鼠标划过历史记录按钮，可查看最近20条请求重放记录。")])]),r("p",[r("img",{attrs:{src:"screenshot/HTTP%E9%87%8D%E6%94%BE.png",alt:"img.png"}})]),r("h3",[e._v("TCP/WS测试")]),r("ul",[r("li",[e._v("连接：输入IP字段以过滤指定客户端ip的流量，否则你将会看到所有的流量，然后点击未连接按钮，即可连上服务端并获取实时的流量数据。再次点击已连接可断开连接。")]),r("li",[e._v("过滤：filter输入框是用于前端过滤流量的，所以所有流量还是缓存在浏览器中的。")]),r("li",[e._v("清屏：会清除当前页面所有Websocket、tcp记录。")]),r("li",[e._v("重放：点击发送、接收按钮可向服务端、客户端发送当前消息详情内的消息，通过修改并发数，可发送多条消息。")]),r("li",[e._v("16进制：点击HEX复选框可以16进制的形式查看、修改当前消息。")])]),r("p",[r("img",{attrs:{src:"screenshot/TCPWS%E6%B5%8B%E8%AF%95.png",alt:"img.png"}})]),r("h3",[e._v("历史记录")]),r("ul",[r("li",[e._v("搜索：从数据库中搜索历史记录，可选择不同类别。logger是记录的所有经过代理的HTTP流量，repeater是所有使用HTTP重放功能的流量，apis是归类了所有经过代理的接口请求。")])]),r("p",[r("img",{attrs:{src:"screenshot/%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95.png",alt:"img_1.png"}})])])])])}],ae={},oe=Object(p["a"])(ae,re,se,!1,null,null,null),ne=oe.exports,ie=(r("e4cb"),{components:{markdown:ne},name:"ManualIndex"}),_e=ie,le=(r("a65d"),Object(p["a"])(_e,ee,te,!1,null,"e5cf0b96",null)),ce=le.exports,ue=[{name:"index",path:"/",title:"MLOGER",redirect:{name:"logger"},isTheme:!0},{path:"/intercept",name:"intercept",title:"HTTP拦截",component:f},{path:"/logger",name:"logger",title:"HTTP记录",component:k},{path:"/repeater",name:"repeater",title:"HTTP重放",component:P},{path:"/imws",name:"imws",title:"TCP/WS测试",component:Q},{path:"/history",name:"history",title:"历史记录",component:Z},{path:"/manual",name:"manual",title:"使用手册",component:ce}],de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Drawer",{attrs:{width:"640",scrollable:!0,placement:"left"},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[r("div",{staticClass:"demo-drawer-profile"},[r("Row",{style:{"padding-top":"30px"}},[r("Table",{attrs:{columns:e.table.header,data:e.table.body,width:"600"},scopedSlots:e._u([{key:"opt",fn:function(t){var s=t.row;return["未接入"===s.status?r("Button",{attrs:{loading:e.connLoading,type:"success",size:"small"},on:{click:function(t){return e.optConnStatus(s.ip,"open")}}},[e._v("接入 ")]):e._e(),"已接入"===s.status?r("Button",{attrs:{loading:e.connLoading,type:"error",size:"small"},on:{click:function(t){return e.optConnStatus(s.ip,"close")}}},[e._v("撤销 ")]):r("span")]}}])})],1)],1)])],1)},pe=[],he={name:"MainConnList",props:["show"],data:function(){return{connLoading:!1,table:{header:[{title:"IP",key:"ip"},{title:"状态",key:"status"},{title:"拦截状态",key:"intercept_status"},{title:"操作",slot:"opt"}],body:[]}}},methods:{optConnStatus:function(e,t){var r=this;r.connLoading=!0,"open"===t?Object(l["n"])(e).then((function(){r.connLoading=!1,r.loadTable()})).catch((function(e){r.connLoading=!1,r.$Message.warning("设置代理ip失败: ".concat(e))})):Object(l["m"])(e).then((function(){r.connLoading=!1,r.loadTable()})).catch((function(e){r.connLoading=!1,r.$Message.warning("撤销代理ip失败: ".concat(e))}))},loadTable:function(){var e=this;Object(l["a"])().then((function(t){for(var r=[],s=0,a=Object.entries(t.data.data);s<a.length;s++){var o=Object(A["a"])(a[s],2),n=o[0],i=o[1],_=i&&"null"!==i?JSON.parse(i):{status:0};r.push({ip:n,status:1===_.status?"已接入":"未接入",intercept_status:1===_.intercept_status?"已开启":"未开启",user:_.user_name||"-"})}e.table.body=r})).catch((function(t){e.$Message.warning("获取链接ip失败: ".concat(t))}))}},computed:{showDrawer:{set:function(e){this.$emit("setDrawerStatus",e)},get:function(){return this.show}}},watch:{show:function(e){e&&this.loadTable()}}},fe=he,ge=(r("788d"),Object(p["a"])(fe,de,pe,!1,null,"2aa2f148",null)),me=ge.exports,we={name:"App",components:{MainConnList:me},data:function(){return{routes:ue,windowHeight:140,showDrawer:!1}},methods:{setAffixHeight:function(){var e=document.documentElement.clientHeight||document.body.clientHeight;e=.3*(e-20),e>140&&(this.windowHeight=e)}},mounted:function(){var e=this;this.setAffixHeight(),window.onresize=function(){e.setAffixHeight()}}},be=we,ye=(r("034f"),Object(p["a"])(be,o,n,!1,null,null,null)),ve=ye.exports,De=r("f825"),Ee=r.n(De);r("f8ce");s["default"].config.productionTip=!1,s["default"].use(a["a"]),s["default"].use(Ee.a);var Me={routes:ue},xe=new a["a"](Me);new s["default"]({el:"#app",router:xe,render:function(e){return e(ve)}}),xe.beforeEach((function(e,t,r){if(t&&"logger"===t.name){var s="";if("intercept"===e.name){var a=localStorage.getItem("loggerPage");a&&(a=JSON.parse(a),a.ip&&a.ip.length>0&&(s="?ip=".concat(a.ip)))}window.open("/#".concat(e.fullPath).concat(s),"_blank")}else e.name?(document.title="MLOGER - "+(e.meta.title||e.name),r()):r({name:"logger"})}))},"5a3f":function(e,t,r){},7596:function(e,t,r){},"788d":function(e,t,r){"use strict";r("5a3f")},"7ac0":function(e,t,r){"use strict";r("8d11")},"7c15":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"n",(function(){return o})),r.d(t,"m",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return _})),r.d(t,"k",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"h",(function(){return h})),r.d(t,"j",(function(){return f})),r.d(t,"i",(function(){return g})),r.d(t,"g",(function(){return m}));r("d3b7");var s=r("bc3a").default,a=function(){return s.post("/api/get_client_ip")},o=function(e){return s.post("/api/set_client_ip_allowed",{ip:e})},n=function(e){return s.post("/api/cancel_client_ip_allowed",{ip:e})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return"get"===t?s.get("/api/intercept"):s.post("/api/intercept",e)},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.post("/api/intercept_op",e)},l=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",describe:""},t={},r=0,a=["id","describe"];r<a.length;r++){var o=a[r];if(!e[o])throw"缺少参数:"+o;t[o]=e[o]}return s.post("/api/edit_req_describe",e)},c=function(e,t){var r={id:e,auth_code:t};return s.post("/api/repeater_share",r)},u=function(e){return s.post("/api/repeater_go",e)},d=function(e){return s.post("/api/repeater_history",e)},p=function(e){return s.get("/api/repeater_get",{params:e})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n={conn_id:e,flow_content:t,hex_content:r,direction:a,concurrent_num:o};if(e&&t&&("send"===a||"receive"===a))return s.post("/api/imws_repeater_go",n);throw console.error(n),"参数错误，请求失败"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o={id:e,conn_id:t,flow_content:a};if(e&&t&&r)return"forward"===r?(o.forward=!0,o.drop=!1):(o.forward=!1,o.drop=!0),s.post("/api/intercept_op_imws",o);throw console.error(o),"参数错误，请求失败"},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={conn_id:e,status:t};if(e&&("on"===t||"off"===t))return s.post("/api/intercept_imws",r);throw console.error(r),"拦截参数错误，请求失败"},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:"",type:"all",page:1,size:20};return e.type||(e.type="all"),s.post("/api/search",e)}},"85ec":function(e,t,r){},8655:function(e,t,r){},"8d11":function(e,t,r){},"939d":function(e,t,r){"use strict";r("1933")},a65d:function(e,t,r){"use strict";r("e860")},b893:function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"e",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return _})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c}));r("b64b"),r("a15b"),r("99af"),r("fb6a"),r("498a"),r("ac1f"),r("5319"),r("2ca0"),r("caad"),r("2532"),r("1276"),r("d3b7"),r("25f0");var s=r("641c"),a=r.n(s),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!Object.keys(e).length)return"";var t=[e.http_version+" "+e.status_code+" "+e.reason];for(var r in e.headers)t.push(r+" : "+e.headers[r]);return t.push(""),t.push(e.content),t.join("\r\n")},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!Object.keys(e).length)return"";var t=[e.method+" "+e.path+" "+e.http_version,"Host: "+e.host];for(var r in e.headers)"Host"!==r&&t.push(r+": "+e.headers[r]);return t.push(""),t.push(e.content),t.join("\r\n")},i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=r.length,a=0;a<e;a++)t.push(r.charAt(Math.floor(Math.random()*s)));return t.join("")},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"§",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.length<1)throw"字符串不允许为空";for(var s=[],a=[],o=-1,n=0;n<e.length;n++)e[n]===t?o>-1?(s.push("".concat(e.slice(o,n)).concat(t)),o=-1):o=n:r&&-1===o&&("\n"===e[n]?(s.push(a.join("").trim()),a=[]):a.push(e[n]));return r&&a.join("").trim().length&&s.push(a.join("")),-1!==o&&console.warn("字符串存在不闭合标识"),s},l=function(e){for(var t=[],r=/&/g,s=/</g,o=/>/g,n=/\n/g,i=0;i<e.length;i++){var _=e[i][0],l=e[i][1],c=l.replace(r,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(n,"&para;<br>");switch(_){case a.a.DIFF_INSERT:t[i]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case a.a.DIFF_DELETE:t[i]='<del style="background:#ffe6e6;">'+c+"</del>";break;case a.a.DIFF_EQUAL:t[i]="<span>"+c+"</span>";break}}return t.join("")},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.trim().startsWith("range:"))return e;var t=e.trim();if(t=t.replace("range:",""),!t.includes(":")&&!t.includes(","))return e;var r=",";t.includes(":")&&(r=":");var s=t.split(r,3);if(s.length<2||!s[1])return e;for(var a=s[0]?parseInt(s[0])?parseInt(s[0]):s[0].charCodeAt():0,o=s[1]?parseInt(s[1])?parseInt(s[1]):s[1].charCodeAt():0,n=s.length>2?parseInt(s[2])?parseInt(s[2]):s[2].charCodeAt():1,i="NaN"==parseInt(s[0]).toString()||"NaN"==parseInt(s[1]).toString(),_=[];a<o;)_.push(i?String.fromCharCode(a):a),a+=n;return _.join("\n")}},d0d5:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("3835"),_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2909"),_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("b85c"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("841c"),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("9861"),core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_object_entries_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("4fad"),core_js_modules_es_object_entries_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_object_entries_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("2ca0"),core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_23__),vue__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("2b0e"),vue_clipboard2__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("4eb5"),vue_clipboard2__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(vue_clipboard2__WEBPACK_IMPORTED_MODULE_25__),_utils_api__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("7c15"),_utils_tools__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("b893"),diff_match_patch__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("641c"),diff_match_patch__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(diff_match_patch__WEBPACK_IMPORTED_MODULE_28__);vue__WEBPACK_IMPORTED_MODULE_24__["default"].use(vue_clipboard2__WEBPACK_IMPORTED_MODULE_25___default.a);var IGNORE_KEYS=["_iid","_version_","mkVersion","_ab_test_","_net_","_uid_"],FLAG_STR="§",dmp=new diff_match_patch__WEBPACK_IMPORTED_MODULE_28___default.a;diff_match_patch__WEBPACK_IMPORTED_MODULE_28___default.a.DIFF_DELETE=1,diff_match_patch__WEBPACK_IMPORTED_MODULE_28___default.a.DIFF_INSERT=1,diff_match_patch__WEBPACK_IMPORTED_MODULE_28___default.a.DIFF_EQUAL=0,__webpack_exports__["a"]={name:"Index",data:function(){return{tableHis:{headers:[{title:"历史记录",key:"text"},{title:"操作",slot:"action",width:50}],body:[],search:[],searchStr:"",allData:{body:[],search:[]}},query:{request:"",host:"",port:"",ishttps:!1,concurrent_num:0,keepua:!0,type:"pitchfork",payload:[]},request:"",response:"",selectDataList:[],resultCollapse:"",concurrentModal:{show:!1,table:{headers:[{title:"id",key:"num_id",width:60},{title:"status",key:"status_code",width:60},{title:"payload",key:"payload",width:120},{title:"response",slot:"content"}],body:[]}},selectFlag:{startIdx:0,endIdx:0},encodeTypeList:["sniper","battering ram","pitchfork","cluster bomb"],repeaterTestModal:{show:!1,vars:"",dest:"",rawDest:{},rawVars:[],rawDivHeight:"100px",simpleModel:!1,title:"Payload配置",preShow:!1,preRaw:""},modalHistory:!1,shareIdAuthCodeDict:{}}},methods:{strToLowerCase:function(e){return e?e.toLowerCase():""},showRepeaterHistory:function(){var e=this;Object(_utils_api__WEBPACK_IMPORTED_MODULE_26__["f"])({}).then((function(t){e.tableHis.body=[];var r,s=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__["a"])(t.data.data.history);try{for(s.s();!(r=s.n()).done;){var a=r.value,o=a.request,n={text:o.scheme+"://"+o.host+o.path,raw:a};e.tableHis.body.push(n);var i=e.strToLowerCase(o.scheme)+"://"+e.strToLowerCase(o.host)+e.strToLowerCase(o.path)+e.strToLowerCase(o.response)+e.strToLowerCase(o.content);e.tableHis.search.push(i),e.tableHis.allData.body.push(n),e.tableHis.allData.search.push(i)}}catch(_){s.e(_)}finally{s.f()}}))},searchGo:function(){var e=this,t=this,r=JSON.parse(JSON.stringify(this.query));t.response="",r.request=this.request,Object(_utils_api__WEBPACK_IMPORTED_MODULE_26__["e"])(r).then((function(r){t.query.concurrent_num>0?(t.concurrentModal.show=!0,t.concurrentModal.table.body=r.data.data.data):(e.showRepeaterHistory(),e._showResponseData(r.data.data.response))})).catch((function(e){e.response?e.response.status<500?t.$Notice.error({title:"请求错误，注意检查请求参数"}):t.$Notice.error({title:"服务端发生未知错误,状态码: "+e.response.status}):t.$Notice.error({title:"未知请求异常"})}))},requestContentFormat:function(e){if(this.request&&!(this.request.length<1)){var t=this.request.split("\n"),r=t[t.length-1];if(("{"!==r[0]||"json"!==e)&&("{"===r[0]||"raw"!==e)){if("json"===e){var s=new URLSearchParams(r);r={};var a,o=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__["a"])(s.keys());try{for(o.s();!(a=o.n()).done;){var n=a.value;IGNORE_KEYS.includes(n)||(r[n]=s.get(n))}}catch(f){o.e(f)}finally{o.f()}r=JSON.stringify(r)}else if("raw"===e){r=JSON.parse(r);var i,_=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__["a"])(IGNORE_KEYS);try{for(_.s();!(i=_.n()).done;){var l=i.value;l in r&&delete r[l]}}catch(f){_.e(f)}finally{_.f()}r=new URLSearchParams(r).toString()}t[t.length-1]=r;for(var c=0;c<t.length;c++){var u=t[c];if(u){u=u.split(":");var d=u[0].toLowerCase().trim();if("content-type"===d){for(var p=1;p<u.length;p++){var h=u[p].toLowerCase().trim();["application/x-www-form-urlencoded","application/json"].includes(h)&&(u[p]="raw"===e?"application/x-www-form-urlencoded":"application/json")}t[c]=u.join(":")}}}this.request=t.join("\n")}}},addFlag:function(){var e=this.$refs.requestEl.$el.children[0].selectionStart,t=this.selectFlag.startIdx||this.selectionEnd?this.selectFlag:{startIdx:e,endIdx:e},r=this.request.slice(0,t.startIdx),s=this.request.slice(t.startIdx,t.endIdx),a=this.request.slice(t.endIdx);this.request="".concat(r).concat(FLAG_STR).concat(s).concat(FLAG_STR).concat(a)},clearFlag:function(){this.request=this.request.split(FLAG_STR).join("")},showPayload:function(){var e=this;if(Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__["a"])(e.request).filter((function(e){return e===FLAG_STR})).length%2)e.$Message.error("缺少闭合标识符: ".concat(FLAG_STR));else{"pitchfork"===e.query.type||"cluster bomb"===e.query.type?e.repeaterTestModal.simpleModel=!1:e.repeaterTestModal.simpleModel=!0,e.repeaterTestModal.title="Payload配置 (".concat(e.query.type,")"),e.repeaterTestModal.show=!0;var t=[];try{t=Object(_utils_tools__WEBPACK_IMPORTED_MODULE_27__["c"])(e.request)}catch(r){e.$Message.error(r),console.error(r)}e.repeaterTestModal.rawVars=t,e.repeaterTestModal.vars=t.join("\n"),e.repeaterTestModal.rawDivHeight=e.$refs.repeaterTestModal.children[0].children[0].style.height}},openNewUrl:function(e){window.open(e,"_blank")},getDifferHtml:function(e,t){var r=dmp.diff_main(e,t);return dmp.diff_cleanupSemantic(r),Object(_utils_tools__WEBPACK_IMPORTED_MODULE_27__["a"])(r)},searchHis:function(){var e={body:[],search:[]},t=this.strToLowerCase(this.tableHis.searchStr);if(!t)return this.tableHis.body=this.tableHis.allData.body,void(this.tableHis.search=this.tableHis.allData.search);for(var r=0;r<this.tableHis.allData.search.length;r++){var s=this.tableHis.allData.search[r];s&&s.includes(t)&&(e.body.push(this.tableHis.allData.body[r]),e.search.push(s))}this.tableHis.body=e.body,this.tableHis.search=e.search},showData:function(e,t){this.selectDataList=[];var r=e.raw;this.selectIdx=t,this._showRequestData(r.request),this._showResponseData(r.response)},getShareUrl:function(e){var t=Object(_utils_tools__WEBPACK_IMPORTED_MODULE_27__["d"])(24),r=e.raw.request._id,s="".concat(window.location.origin.toString(),"/#/repeater?id=").concat(r,"&auth_code=").concat(t);return this.shareIdAuthCodeDict[s]={authId:t,requestId:r},s},shareUrl:function(e){var t=this,r=this.shareIdAuthCodeDict[e.text];r&&Object(_utils_api__WEBPACK_IMPORTED_MODULE_26__["l"])(r["requestId"],r["authId"]).then((function(){})).catch((function(){t.$Message.warning("ShareAuthCode上传失败")})),this.$Notice.open({title:"分享链接",desc:e.text.replace("&auth_code","&auth_code\n")})},shareUrlError:function(){this.$Notice.error({title:"分享链接失败"})},bodyRequestSelectEvent:function(e){this.selectFlag={startIdx:e.target.selectionStart,endIdx:e.target.selectionEnd}},bodyResponseSelectEvent:function(){this.selectFlag={startIdx:0,endIdx:0}},_generateTitle:function(e,t){var r=e.num_id,s=e.payload,a=t.content.length;return"编号:".concat(r,"  Payload:").concat(s,"  长度:").concat(a)},_convertRequestResult:function(e){var t=["".concat(e.method," ").concat(e.path," ").concat(e.http_version),"Host: ".concat(e.host).concat(e.port?":"+e.port:"")];for(var r in e.headers)"Host"!==r&&t.push(r+": "+e.headers[r]);return t.push(""),t.push(e.content.trim()),t.join("\n")},_convertResponseResult:function(e){if(e&&e.headers){var t=[e.http_version+" "+e.status_code+" "+e.reason];for(var r in e.headers)t.push(r+" : "+e.headers[r]);return t.push(""),t.push(e.content),t.join("\n")}this.response=""},_showRequestData:function(e){this.request=this._convertRequestResult(e),this.query.host=e.host,this.query.port=e.port,this.query.ishttps=Boolean("https"===this.strToLowerCase(e.scheme))},_showResponseData:function(e){this.response=this._convertResponseResult(e)},rowClassName:function(){return"table-history-record-row"},preShowPlayload:function(e){var t=this;if("cancel"!==e){t.repeaterTestModal.preShow=!0;try{t.setPlayload()}catch(n){t.$Message.error("参数错误 ".concat(n)),t.repeaterTestModal.preShow=!1}if(t.repeaterTestModal.simpleModel)t.repeaterTestModal.preRaw=t.repeaterTestModal.dest,t.repeaterTestModal.dest=t.query.payload[0].join("\n");else{t.repeaterTestModal.preRaw=vue__WEBPACK_IMPORTED_MODULE_24__["default"].util.extend({},t.repeaterTestModal.rawDest);for(var r=0;r<t.repeaterTestModal.rawVars.length;r++)t.repeaterTestModal.rawDest[t.repeaterTestModal.rawVars[r]]=t.query.payload[r].join("\n")}}else if(t.repeaterTestModal.preShow=!1,t.repeaterTestModal.simpleModel)t.repeaterTestModal.dest=t.repeaterTestModal.preRaw;else{var s,a=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__["a"])(t.repeaterTestModal.rawVars);try{for(a.s();!(s=a.n()).done;){var o=s.value;t.repeaterTestModal.rawDest[o]=t.repeaterTestModal.preRaw[o]}}catch(i){a.e(i)}finally{a.f()}}},setPlayload:function setPlayload(){var _this=this,payload=[];if(_this.repeaterTestModal.simpleModel)payload=[Object(_utils_tools__WEBPACK_IMPORTED_MODULE_27__["c"])(_this.repeaterTestModal.dest,FLAG_STR,!0)];else{var _iterator5=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_2__["a"])(_this.repeaterTestModal.rawVars),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var v=_step5.value;payload.push(Object(_utils_tools__WEBPACK_IMPORTED_MODULE_27__["c"])(_this.repeaterTestModal.rawDest[v],FLAG_STR,!0))}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}for(var _i=0,_Object$entries=Object.entries(payload);_i<_Object$entries.length;_i++){for(var _Object$entries$_i=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(_Object$entries[_i],2),idx=_Object$entries$_i[0],lines=_Object$entries$_i[1],_i2=0,_Object$entries2=Object.entries(lines);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=Object(_Users_momo_Desktop_momo_2021_Q4_mloger_open_front_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(_Object$entries2[_i2],2),i=_Object$entries2$_i[0],line=_Object$entries2$_i[1];if(line=Object(_utils_tools__WEBPACK_IMPORTED_MODULE_27__["b"])(line),line.trim().startsWith(FLAG_STR)){line=line.trim().split(FLAG_STR).join("");try{line=eval(line)(),"Array"===line.constructor.name?line=line.join("\n"):"String"!==line.constructor.name&&_this.$Message.error("返回值内容仅支持字符串和数组,错误段: \n".concat(JSON.stringify(line)," \n"))}catch(e){throw"参数错误 ".concat(e)}}lines[i]=line}payload[idx]=lines.filter((function(e){return""!==e.trim()}))}_this.query.payload=payload}},mounted:function(){var e=this;if(this.$route.query.id){var t=this.$route.query.auth_code,r={id:this.$route.query.id};t&&(r["auth_code"]=t),Object(_utils_api__WEBPACK_IMPORTED_MODULE_26__["d"])(r).then((function(t){e._showRequestData(t.data.data[0].request),e._showResponseData(t.data.data[0].response);var r=[],s=t.data.data;s.length>0&&s.forEach((function(t,s){if(s>0){var a=e.$router.resolve({name:"repeater",query:{id:t.request._id}});r.push({title:e._generateTitle(t.request,t.response),url:a.href,request:e._convertRequestResult(t.request),response:e._convertResponseResult(t.response)})}})),e.selectDataList=r}))}this.showRepeaterHistory()}}},e860:function(e,t,r){},eb2a:function(e,t,r){"use strict";r("8655")},ff37:function(e,t,r){"use strict";r("29d3")}});
//# sourceMappingURL=app.b9fd7064.js.map